(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,n){e.exports=n(228)},119:function(e,t,n){},124:function(e,t){},126:function(e,t){},163:function(e,t){},164:function(e,t){},228:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(110),s=n.n(r),c=(n(119),n(113)),u=n(9),i=n(10),l=n(12),m=n(11),d=n(7),h=n(13),f=[{body:"Playfair Display, serif",author:"Source Sans Pro, sans-serif"},{body:"Abril Fatface, cursive",author:"Poppins, sans-serif"},{body:"Ruda, sans-serif",author:"Roboto Slab, serif"},{body:"Cormorant Garamond, serif",author:"Fira Sans, sans-serif"},{body:"PT Sans, sans-serif",author:"Playfair Display, serif"}],b=n(59),p=n.n(b),g={createIterator:function(e){return this.createIteratorObj(e)},createIteratorObj:p.a.mark(function e(t){var n,a,o,r,s,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,a=!1,o=void 0,e.prev=3,r=t[Symbol.iterator]();case 5:if(n=(s=r.next()).done){e.next=12;break}return c=s.value,e.next=9,c;case 9:n=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),a=!0,o=e.t0;case 18:e.prev=18,e.prev=19,n||null==r.return||r.return();case 21:if(e.prev=21,!a){e.next=24;break}throw o;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}},e,null,[[3,14,18,26],[19,,21,25]])})},v={getTokenByKey:function(e){return window.localStorage.getItem(e)},setToken:function(e,t){window.localStorage.setItem(e,t)},updateToken:function(e,t){window.localStorage.setItem(e,t)},removeTokenByKey:function(e){window.localStorage.removeItem(e)}},k=n(60),E=n.n(k),I=n(25),_=o.a.createContext(),y=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={quotes:[],currentQuote:"",backgroundImageUrls:[],fontPairings:Object(c.a)(f),backgroundImageUrl:"",fontPair:{},previousBackgroundImageUrl:"",previousFontPair:{},keepBackground:!1,keepFonts:!1,keepQuote:!1,isLoggedIn:!1,username:"",userId:0,savedQuotes:[]},n.handleRandomize=n.handleRandomize.bind(Object(d.a)(n)),n.handleUndo=n.handleUndo.bind(Object(d.a)(n)),n.handleCheckboxCheck=n.handleCheckboxCheck.bind(Object(d.a)(n)),n.handleSaveQuote=n.handleSaveQuote.bind(Object(d.a)(n)),n.handleFavoritesListItemClick=n.handleFavoritesListItemClick.bind(Object(d.a)(n)),n.handleCreateAccountSubmit=n.handleCreateAccountSubmit.bind(Object(d.a)(n)),n.handleLogin=n.handleLogin.bind(Object(d.a)(n)),n.handleLogout=n.handleLogout.bind(Object(d.a)(n)),n.getUpdatedSavedQuotes=n.getUpdatedSavedQuotes.bind(Object(d.a)(n)),n.handleDeleteFavoritesListItem=n.handleDeleteFavoritesListItem.bind(Object(d.a)(n)),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.initializeApp();var e=v.getTokenByKey("motiv8-jwt");if(e){var t=E.a.decode(e),n=t.sub,a=t.userId;this.setState({isLoggedIn:!0,username:n,userId:a})}}},{key:"initializeApp",value:function(){var e=this,t=this.getBackgroundImages(30),n=this.getQuotes(30);Promise.all([n,t]).then(function(t){e.fontPairItObj=g.createIterator(e.state.fontPairings),e.handleRandomize()}).catch(function(e){return console.log(e)})}},{key:"handleRandomize",value:function(){this.state.keepBackground||this.iterateBackgroundUrl(this.backgroundUrlItObj.next()),this.state.keepFonts||this.iterateFontPairing(this.fontPairItObj.next()),this.state.keepQuote||this.iterateQuote(this.quoteItObj.next())}},{key:"handleUndo",value:function(){this.state.keepBackground||this.setState(function(e){return{backgroundImageUrl:e.previousBackgroundImageUrl,previousBackgroundImageUrl:e.backgroundImageUrl}}),this.state.keepFonts||this.setState(function(e){return{fontPair:e.previousFontPair,previousFontPair:e.fontPair}}),this.state.keepQuote||this.setState(function(e){return{currentQuote:e.previousQuote,previousQuote:e.currentQuote}})}},{key:"handleSaveQuote",value:function(e,t){if(0!==e){var n={backgroundImageUrl:this.state.backgroundImageUrl,quoteId:this.state.currentQuote.id,bodyFont:this.state.fontPair.body,authorFont:this.state.fontPair.author,userId:e};fetch("".concat(I.API_BASE_URL,"/savedQuotes"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v.getTokenByKey("motiv8-jwt"))},body:JSON.stringify(n)}).then(function(n){t(e)})}}},{key:"handleCheckboxCheck",value:function(e){switch(e.target.id){case"keep-quote-checkbox":this.setState(function(e){return{keepQuote:!e.keepQuote}});break;case"keep-fonts-checkbox":this.setState(function(e){return{keepFonts:!e.keepFonts}});break;case"keep-background-checkbox":this.setState(function(e){return{keepBackground:!e.keepBackground}})}}},{key:"handleFavoritesListItemClick",value:function(e,t){this.setState({currentQuote:e,backgroundImageUrl:e.backgroundimageurl,keepBackground:!1,keepFonts:!1,keepQuote:!1},function(){t.push("/quotes")})}},{key:"handleCreateAccountSubmit",value:function(e,t){var n=this;e.preventDefault();var a={username:t.username,password:t.password};fetch("".concat(I.API_BASE_URL,"/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){if(e.ok)return e.json()}).then(function(e){n.handleLogin(null,a)})}},{key:"handleLogin",value:function(e,t){var n=this;e&&e.preventDefault();var a={username:t.username,password:t.password};fetch("".concat(I.API_BASE_URL,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){var t=E.a.decode(e.authToken);v.setToken("motiv8-jwt",e.authToken),n.setState({isLoggedIn:!0,username:t.subject,userId:t.userId,savedQuotes:e.savedQuotes})})}},{key:"handleLogout",value:function(){v.removeTokenByKey("motiv8-jwt"),this.setState({isLoggedIn:!1,userId:0,username:"",savedQuotes:[]})}},{key:"getUpdatedSavedQuotes",value:function(e){var t=this;fetch("".concat(I.API_BASE_URL,"/savedQuotes/").concat(e),{headers:{Authorization:"Bearer ".concat(v.getTokenByKey("motiv8-jwt"))}}).then(function(e){return e.json()}).then(function(e){t.setState({savedQuotes:e})})}},{key:"handleDeleteFavoritesListItem",value:function(e){var t=this,n={quoteId:e};fetch("".concat(I.API_BASE_URL,"/savedQuotes/"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v.getTokenByKey("motiv8-jwt"))},body:JSON.stringify(n)}).then(function(n){n.ok&&t.setState(function(t){return{savedQuotes:t.savedQuotes.filter(function(t){return t.id===e?void 0:t})}})})}},{key:"getBackgroundImages",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return fetch("https://api.unsplash.com/photos/random?count=".concat(t),{headers:{Authorization:"Client-ID ".concat("637ad8107185907a6e559449be25e4c6fb9429f66f500149003592bbf8bf49ce")}}).then(function(e){return e.json()}).then(function(t){return new Promise(function(n){e.setState({backgroundImageUrls:t},function(){e.backgroundUrlItObj=g.createIterator(e.state.backgroundImageUrls),n("backgroundUrlItObj Created")})})})}},{key:"getQuotes",value:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];return fetch("".concat(I.API_BASE_URL,"/quotes")).then(function(e){return e.json()}).then(function(t){return new Promise(function(n){e.setState({quotes:t},function(){e.quoteItObj=g.createIterator(e.state.quotes),n("quoteItObj Created")})})})}},{key:"iterateBackgroundUrl",value:function(e){var t=e.value;e.done?this.getBackgroundImages(30):this.setState(function(e){return{backgroundImageUrl:t.urls.regular,previousBackgroundImageUrl:e.backgroundImageUrl}})}},{key:"iterateFontPairing",value:function(e){var t=e.value;e.done?(this.fontPairItObj=g.createIterator(this.state.fontPairings),this.iterateFontPairing(this.fontPairItObj.next())):this.setState(function(e){return{fontPair:t,previousFontPair:e.fontPair}})}},{key:"iterateQuote",value:function(e){var t=e.value;e.done?this.getQuotes(30):this.setState(function(e){return{currentQuote:t,previousQuote:e.currentQuote}})}},{key:"render",value:function(){var e={state:this.state,methods:{handleCheckboxCheck:this.handleCheckboxCheck,handleRandomize:this.handleRandomize,handleUndo:this.handleUndo,handleSaveQuote:this.handleSaveQuote,handleFavoritesListItemClick:this.handleFavoritesListItemClick,handleCreateAccountSubmit:this.handleCreateAccountSubmit,handleLogin:this.handleLogin,handleLogout:this.handleLogout,getUpdatedSavedQuotes:this.getUpdatedSavedQuotes,handleDeleteFavoritesListItem:this.handleDeleteFavoritesListItem}};return o.a.createElement(_.Provider,{value:e},this.props.children)}}]),t}(o.a.Component),C=n(22),O=n(23),j=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={username:"",password:""},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleTextInput",value:function(e){switch(e.target.id){case"username-input":this.setState({username:e.target.value});break;case"password-input":this.setState({password:e.target.value});break;default:console.error("onChange id not found in login form")}}},{key:"render",value:function(){var e=this;return o.a.createElement(_.Consumer,null,function(t){var n=t.methods;return o.a.createElement("div",null,o.a.createElement("form",{className:"input-form",onSubmit:function(t){return n.handleLogin(t,e.state)}},o.a.createElement("label",{className:"input-form__label",htmlFor:"username-input"},"Username"),o.a.createElement("input",{id:"username-input",type:"text",onChange:function(t){return e.handleTextInput(t)}}),o.a.createElement("label",{className:"input-form__label",htmlFor:"password-input"},"Password"),o.a.createElement("input",{id:"password-input",type:"password",onChange:function(t){return e.handleTextInput(t)}}),o.a.createElement("input",{className:"input-form__submit",type:"submit",value:"Sign In"})))})}}]),t}(a.Component),S=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={username:"",password:"",passwordConfirm:""},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleTextInput",value:function(e){switch(e.target.id){case"create-username-input":this.setState({username:e.target.value});break;case"create-password-input":this.setState({password:e.target.value});break;case"create-password-confirm-input":this.setState({passwordConfirm:e.target.value});break;default:console.error("onChange id not found in create account form")}}},{key:"render",value:function(){var e=this;return o.a.createElement(_.Consumer,null,function(t){var n=t.methods;return o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{className:"create-account-form",onSubmit:function(t){n.handleCreateAccountSubmit(t,e.state),e.props.setIsInCreateAccountModeFalse()}},o.a.createElement("label",{className:"create-account-form__label",htmlFor:"username-input"},"Username"),o.a.createElement("input",{id:"create-username-input",type:"text",onChange:function(t){return e.handleTextInput(t)}}),o.a.createElement("label",{className:"create-account-form__label",htmlFor:"password-input"},"Password"),o.a.createElement("input",{id:"create-password-input",type:"password",onChange:function(t){return e.handleTextInput(t)}}),o.a.createElement("label",{className:"create-account-form__label",htmlFor:"password-confirm-input"},"Confirm Password"),o.a.createElement("input",{id:"create-password-confirm-input",type:"password",onChange:function(t){return e.handleTextInput(t)}}),o.a.createElement("input",{className:"create-account-form__submit",type:"submit",value:"Create Account"})))})}}]),t}(a.Component),N=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={isInCreateAccountMode:!1},n.setIsInCreateAccountModeFalse=n.setIsInCreateAccountModeFalse.bind(Object(d.a)(n)),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"setIsInCreateAccountModeTrue",value:function(){this.setState({isInCreateAccountMode:!0})}},{key:"setIsInCreateAccountModeFalse",value:function(){this.setState({isInCreateAccountMode:!1})}},{key:"render",value:function(){var e,t,n=this;return this.state.isInCreateAccountMode?(e="",t="highlight"):(e="highlight",t=""),o.a.createElement("div",{className:"account-access-forms"},o.a.createElement("button",{className:"account-access-forms__button ".concat(e),onClick:function(){return n.setIsInCreateAccountModeFalse()}},"Sign In"),o.a.createElement("button",{className:"account-access-forms__button ".concat(t),onClick:function(){return n.setIsInCreateAccountModeTrue()}},"Create Account"),o.a.createElement("div",{className:"account-access-forms__selected-form"},this.state.isInCreateAccountMode?o.a.createElement(S,{setIsInCreateAccountModeFalse:this.setIsInCreateAccountModeFalse}):o.a.createElement(j,null)))}}]),t}(o.a.Component);function w(e){return o.a.createElement(_.Consumer,null,function(t){var n=t.state,a=t.methods;return o.a.createElement("ul",{className:"user-menu"},o.a.createElement(C.c,{className:"user-menu__list-item__link",to:"/user/".concat(n.username),onClick:function(){return e.toggleMenuIsOpen()}},o.a.createElement("li",{className:"user-menu__list-item"},"Profile")),o.a.createElement(C.c,{className:"user-menu__list-item__link",to:"/quotes",onClick:function(){return e.toggleMenuIsOpen()}},o.a.createElement("li",{className:"user-menu__list-item"},"Quote Generator")),o.a.createElement(C.c,{className:"user-menu__list-item__link",to:"/",onClick:function(){return a.handleLogout()}},o.a.createElement("li",{className:"user-menu__list-item"},"Log Out")))})}var P=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={menuIsOpen:!1,userIsLoggedIn:!0},n.toggleMenuIsOpen=n.toggleMenuIsOpen.bind(Object(d.a)(n)),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"toggleMenuIsOpen",value:function(){this.setState(function(e){return{menuIsOpen:!e.menuIsOpen}})}},{key:"render",value:function(){var e=this;return o.a.createElement(_.Consumer,null,function(t){var n=t.state;return e.state.menuIsOpen?o.a.createElement("div",{className:"menu-container"},o.a.createElement("header",{className:"menu"},o.a.createElement("button",{className:"menu__button",onClick:e.toggleMenuIsOpen},"X"),o.a.createElement("div",{className:"menu__greeting"},n.isLoggedIn?"Welcome ".concat(n.username):""),n.isLoggedIn?o.a.createElement(w,{toggleMenuIsOpen:e.toggleMenuIsOpen}):o.a.createElement(N,null))):o.a.createElement("div",{className:"menu-container"},o.a.createElement("header",{className:"menu"},o.a.createElement("button",{className:"menu__button",onClick:e.toggleMenuIsOpen},"Menu"),o.a.createElement("div",{className:"menu__greeting"},n.isLoggedIn?"Welcome ".concat(n.username):"")))})}}]),t}(o.a.Component);function Q(){return o.a.createElement("div",{className:"container landing-page-container"},o.a.createElement("h1",{className:"landing-page__header"},"Welcome to Motiv8"),o.a.createElement("main",null,o.a.createElement("h2",{className:"landing-page__subheader"},"Customize your inspiration"),o.a.createElement("div",null,"Motiv8 is a random quote generator.",o.a.createElement("ul",null,o.a.createElement("li",null,"Users can create unique quote, font, and background image pairings."),o.a.createElement("li",null,"If a user chooses to create an account they will have the ability to save their favorite quotes to their profile."))),o.a.createElement(C.b,{to:"/quotes"},o.a.createElement("button",{className:"get-started-button"},"Get Started!"))))}var A=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement(_.Consumer,null,function(e){var t=e.state,n={backgroundSize:"cover",backgroundPosition:"center center",backgroundImage:"url(".concat(t.backgroundImageUrl,")")},a={fontFamily:t.fontPair.body},r={fontFamily:t.fontPair.author};return o.a.createElement("div",{className:"quote-display",style:n},o.a.createElement("div",{className:"quote-backdrop"},o.a.createElement("div",{className:"quote-body",style:a},t.currentQuote.quote),o.a.createElement("div",{className:"quote-author",style:r},t.currentQuote.author)))})}}]),t}(o.a.Component),F=n(26),U=n(27);function x(){return o.a.createElement(_.Consumer,null,function(e){var t=e.methods,n=e.state,a=n.keepBackground,r=n.keepFonts,s=n.keepQuote;return o.a.createElement("div",{className:"quote-controls-container"},o.a.createElement("h5",{className:"quote-controls-heading"},"Randomize Options"),o.a.createElement("div",{className:"quote-controls"},o.a.createElement("input",{onChange:function(e){return t.handleCheckboxCheck(e)},type:"checkbox",id:"keep-quote-checkbox"}),o.a.createElement("label",{className:"quote-controls__label",htmlFor:"keep-quote-checkbox"},o.a.createElement("div",null,s?o.a.createElement(F.a,{icon:U.a,size:"lg"}):o.a.createElement(F.a,{icon:U.b,size:"lg"})),o.a.createElement("span",{className:"quote-controls__label__text"},"Keep Quote")),o.a.createElement("input",{onChange:function(e){return t.handleCheckboxCheck(e)},type:"checkbox",id:"keep-fonts-checkbox"}),o.a.createElement("label",{className:"quote-controls__label",htmlFor:"keep-fonts-checkbox"},o.a.createElement("div",null,r?o.a.createElement(F.a,{icon:U.a,size:"lg"}):o.a.createElement(F.a,{icon:U.b,size:"lg"})),o.a.createElement("span",{className:"quote-controls__label__text"},"Keep Fonts")),o.a.createElement("input",{onChange:function(e){return t.handleCheckboxCheck(e)},type:"checkbox",id:"keep-background-checkbox"}),o.a.createElement("label",{className:"quote-controls__label",htmlFor:"keep-background-checkbox"},o.a.createElement("div",null,a?o.a.createElement(F.a,{icon:U.a,size:"lg"}):o.a.createElement(F.a,{icon:U.b,size:"lg"})),o.a.createElement("span",{className:"quote-controls__label__text"},"Keep Background"))))})}function L(){return o.a.createElement(_.Consumer,null,function(e){var t=e.methods,n=e.state;return o.a.createElement("div",{className:"quote-nav-container"},o.a.createElement("button",{className:"quote-nav__button randomize-button",onClick:function(){return t.handleRandomize()}},"Randomize"),o.a.createElement("button",{className:"quote-nav__button undo-button",onClick:function(){return t.handleUndo()}},"Undo"),o.a.createElement("button",{className:"quote-nav__button save-button",onClick:function(){return t.handleSaveQuote(n.userId,t.getUpdatedSavedQuotes)}},"Save"))})}function q(){return o.a.createElement("div",{className:"container"},o.a.createElement(x,null),o.a.createElement(A,null),o.a.createElement(L,null))}function B(e){return o.a.createElement(_.Consumer,null,function(t){var n=t.methods,a={fontFamily:e.quote.bodyfont},r={fontFamily:e.quote.authorfont};return o.a.createElement("li",{className:"favorites-list-item"},o.a.createElement("div",null,o.a.createElement("p",{style:a},e.quote.quote),o.a.createElement("p",{style:r},e.quote.author),o.a.createElement("button",{className:"favorites-list-item__button",onClick:function(){return n.handleFavoritesListItemClick(e.quote,e.history)}},"Edit"),o.a.createElement("button",{className:"favorites-list-item__button",onClick:function(){return n.handleDeleteFavoritesListItem(e.savedQuoteId)}},"Delete")),o.a.createElement("img",{className:"favorites-list-item-img",alt:"",src:e.quote.backgroundimageurl}))})}function T(e){var t=e.history;return o.a.createElement(_.Consumer,null,function(e){var n=e.state.savedQuotes.map(function(e){return o.a.createElement(B,{key:e.id,quote:e,history:t,savedQuoteId:e.id})});return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{className:"favorites-list-heading"},"Favorites"),o.a.createElement("ul",{className:"favorites-list"},n))})}var M=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.getUpdatedSavedQuotes(this.props.userId)}},{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement(T,{history:this.props.history}))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(y,null,o.a.createElement(function(e){return o.a.createElement(C.a,null,o.a.createElement(P,null),o.a.createElement(O.c,null,o.a.createElement(O.a,{path:"/",exact:!0,component:Q}),o.a.createElement(O.a,{path:"/quotes",component:q}),o.a.createElement(_.Consumer,null,function(e){var t=e.state,n=e.methods;return o.a.createElement(O.a,{path:"/user/:username",render:function(e){return o.a.createElement(M,Object.assign({},e,{getUpdatedSavedQuotes:n.getUpdatedSavedQuotes,userId:t.userId}))}})})))},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},25:function(e,t){e.exports={PORT:Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_KEY:"637ad8107185907a6e559449be25e4c6fb9429f66f500149003592bbf8bf49ce"}).PORT||8080,API_BASE_URL:Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_KEY:"637ad8107185907a6e559449be25e4c6fb9429f66f500149003592bbf8bf49ce"}).REACT_APP_API_BASE_URL||"http://localhost:8000/api"}}},[[114,1,2]]]);
//# sourceMappingURL=main.18ae77af.chunk.js.map